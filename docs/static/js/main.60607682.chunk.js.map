{"version":3,"sources":["components/model/Story.tsx","components/util/Utils.tsx","components/shared/StoryDate.tsx","components/pages/home/children/StoryGrid.tsx","components/pages/home/HomePage.tsx","components/pages/story/children/StoryCover.tsx","components/pages/story/children/PhotoWrapper.tsx","components/pages/story/children/PhotoSet.tsx","components/util/URLUtils.tsx","components/pages/story/children/TagSet.tsx","components/pages/story/children/StoryDescription.tsx","components/pages/story/StoryPage.tsx","components/pages/tags/TagPage.tsx","components/Footer.tsx","App.tsx","index.tsx","components/model/Author.tsx"],"names":["getStoryID","story","title","split","join","toLowerCase","getStoryCoverImageURL","downloadJSON","fileName","fetch","then","response","json","trackPageView","url","window","location","hostname","indexOf","ReactGA","pageview","StoryDate","props","date","Date","className","month","getMonth","getNameOfMonth","getDate","d","getDateOrdinal","getFullYear","compareStoriesMostRecentFirst","a","b","StoryGrid","cols","stories","sort","map","index","StoryThumbnail","key","rows","i","length","thumbnailsInRow","push","Row","Container","fluid","style","maxWidth","alignSelf","margin","padding","Col","md","to","backgroundImage","subTitle","HomePage","document","pathname","search","textAlign","width","alt","src","this","author","name","Button","href","variant","React","Component","StoryCover","titles","instaHandle","PhotoWrapperClass","imageUrl","arrayBuffer","urlObject","URL","createObjectURL","Blob","tags","ExifReader","load","setState","imageBlobURL","focalLength","description","aperture","shutterSpeed","iso","error","console","loadImage","state","height","backgroundColor","replace","Number","parseFloat","PhotoSet","photos","layout","iL","iP","amountOfPhotosInRow","columns","photoInRow","row","getLinkForTag","tag","TagSet","Tag","value","StoryDescription","StoryPage","TagPage","Footer","App","hasFullyLoaded","storyIndex","storyID","id","storyRoutes","tagRoutes","path","flat","storiesWithTag","filter","includes","initialize","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.60607682.chunk.js","sourcesContent":["import { Photo } from \"./Photo\";\r\n\r\nexport type StoryIndex = {\r\n    stories: string[]\r\n}\r\n\r\nexport type Story = {\r\n    title: string,\r\n    subTitle?: string,\r\n    description?: string,\r\n    instaHandle?: string,\r\n    date: string,\r\n    photos: Photo[],\r\n    layout: number[],\r\n    tags?: string[]\r\n}\r\n\r\nexport function getStoryID(story: Story): string {\r\n    return story.title.split(\" \").join(\"-\").toLowerCase();\r\n}\r\n\r\nexport function getStoryCoverImageURL(story: Story): string {\r\n    return `/stories/${getStoryID(story)}/cover.jpg`\r\n}","import ReactGA from 'react-ga';\r\n\r\nexport function downloadJSON(fileName: string): Promise<any> {\r\n    return fetch(fileName).then((response) => {\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport function getNameOfMonth(date: Date): string {\r\n    let month = [];\r\n    month[0] = \"January\";\r\n    month[1] = \"February\";\r\n    month[2] = \"March\";\r\n    month[3] = \"April\";\r\n    month[4] = \"May\";\r\n    month[5] = \"June\";\r\n    month[6] = \"July\";\r\n    month[7] = \"August\";\r\n    month[8] = \"September\";\r\n    month[9] = \"October\";\r\n    month[10] = \"November\";\r\n    month[11] = \"December\";\r\n    return month[date.getMonth()];\r\n}\r\n\r\nexport function getDateOrdinal(date: Date): string {\r\n    const d = date.getDate();\r\n    if (d > 3 && d < 21) return 'th';\r\n    switch (d % 10) {\r\n        case 1: return \"st\";\r\n        case 2: return \"nd\";\r\n        case 3: return \"rd\";\r\n        default: return \"th\";\r\n    }\r\n}\r\n\r\nexport function trackPageView(url: string) {\r\n    if (window.location.hostname.indexOf(\"localhost\") > -1) {\r\n        return;\r\n    }\r\n    ReactGA.pageview(url);\r\n}","import { getNameOfMonth, getDateOrdinal } from \"../util/Utils\";\r\nimport React from 'react';\r\nimport './StoryDate.css'\r\n\r\ntype StoryDateProps = {\r\n    date: string\r\n}\r\n\r\nexport function StoryDate(props: StoryDateProps) {\r\n    const date = new Date(props.date);\r\n    return <div className=\"story-date\">\r\n        {getNameOfMonth(date)} {date.getDate()}<sup>{getDateOrdinal(date)}</sup>, <span>{date.getFullYear()}</span>\r\n    </div>\r\n}","import React from 'react';\r\nimport { Story, getStoryCoverImageURL, getStoryID } from \"../../../model/Story\";\r\nimport { Col, Container, Row } from \"react-bootstrap\";\r\nimport './StoryGrid.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { StoryDate } from '../../../shared/StoryDate';\r\n\r\nfunction compareStoriesMostRecentFirst(a: Story, b: Story): number {\r\n    if (a.date > b.date) {\r\n        return -1;\r\n    }\r\n    if (b.date > a.date) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport type StoryGridProps = {\r\n    stories: Story[]\r\n}\r\n\r\nexport function StoryGrid(props: StoryGridProps) {\r\n    const cols = props.stories.sort(compareStoriesMostRecentFirst).map((story: Story, index: number) => {\r\n        return <StoryThumbnail key={index} story={story} />;\r\n    });\r\n\r\n    const rows = [];\r\n    for (let i = 0; i < cols.length; i+=3) {\r\n        const thumbnailsInRow =[];\r\n        thumbnailsInRow.push(<StoryThumbnail key={i} story={props.stories[i]} />)\r\n        thumbnailsInRow.push(<StoryThumbnail key={i+1} story={props.stories[i+1]} />)\r\n        thumbnailsInRow.push(<StoryThumbnail key={i+2} story={props.stories[i+2]} />)\r\n        //const colsInRow = [cols[i], cols[i + 1], cols[i + 2]].filter((value) => { return value !== undefined });\r\n        rows.push(<Row key={i}>{thumbnailsInRow}</Row>);\r\n    }\r\n\r\n    return (\r\n        <Container fluid=\"md\" style={{maxWidth: \"1500px\", alignSelf: \"center\", margin: \"auto\", padding: \"1rem\"}}>\r\n            {rows}\r\n        </Container>\r\n    );\r\n}\r\n\r\ntype StoryThumbnailProps = {\r\n    story?: Story\r\n}\r\n\r\nfunction StoryThumbnail(props: StoryThumbnailProps) {\r\n    if (!props.story) {\r\n        return <Col md={4} className={\"story-thumbnail-wrapper\"}>\r\n            <div className={\"story-thumbnail empty\"}></div>\r\n        </Col>\r\n    }\r\n\r\n    return <Col md={4} className={\"story-thumbnail-wrapper\"}>\r\n        <article>\r\n            <Link to={`/${getStoryID(props.story)}`}>\r\n                <div className={\"story-thumbnail\"}>\r\n                    <div className=\"story-thumbnail-image\" style={{ backgroundImage: `url(${getStoryCoverImageURL(props.story)}) ` }}></div>\r\n                    <div className=\"story-thumbnail-gradient\" ></div>\r\n                    <div className=\"story-thumbnail-description\">\r\n                        <h2>\r\n                            <Link to={`/${getStoryID(props.story)}`}>{props.story.title}</Link>\r\n                        </h2>\r\n                        <h3>\r\n                            {props.story.subTitle || \"See more\"}\r\n                        </h3>\r\n                        <StoryDate date={props.story.date} />\r\n                    </div>\r\n                </div>\r\n            </Link>\r\n        </article>\r\n    </Col>\r\n}","import React from 'react';\r\nimport { Story } from '../../model/Story';\r\nimport { StoryGrid } from './children/StoryGrid';\r\nimport { Author } from '../../model/Author';\r\nimport './HomePage.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Button } from 'react-bootstrap';\r\nimport { trackPageView } from '../../util/Utils';\r\n\r\nexport type HomePageProps = {\r\n    stories: Story[];\r\n    author: Author;\r\n}\r\n\r\nexport class HomePage extends React.Component<HomePageProps, {}> {\r\n\r\n    componentDidMount() {\r\n        document.title = 'Home - sambenjamin.be';\r\n        trackPageView(window.location.pathname + window.location.search);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"homepage\">\r\n            <Container style={{ textAlign: \"center\", padding: \"1rem\" }}>\r\n                <p><Link to={\"/\"}>\r\n                    <img width=\"150px\" alt=\"Author portrait\" src=\"/profile.png\"></img>\r\n                </Link></p>\r\n                <h1>{this.props.author.name}</h1>\r\n                <Button href={this.props.author.url} variant=\"outline-dark\">Follow @samgielis</Button>\r\n            </Container>\r\n\r\n            <StoryGrid stories={this.props.stories}></StoryGrid>\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport { Story, getStoryCoverImageURL } from \"../../../model/Story\";\r\nimport { Author } from \"../../../model/Author\";\r\nimport { Container, Button } from 'react-bootstrap';\r\nimport './StoryCover.css';\r\nimport { Link } from 'react-router-dom';\r\nimport {StoryDate} from \"../../../shared/StoryDate\";\r\n\r\nexport type StoryCoverProps = {\r\n    story: Story,\r\n    author: Author\r\n}\r\n\r\nexport function StoryCover(props: StoryCoverProps) {\r\n    const titles = [];\r\n    titles.push(<h1>{props.story.title}</h1>);\r\n\r\n    if (props.story.subTitle) {\r\n        titles.push(<h2>{props.story.subTitle}</h2>);\r\n    }\r\n\r\n    if (props.story.instaHandle) {\r\n        titles.push(\r\n            <Button variant=\"outline-light\" href={`https://instagram.com/${props.story.instaHandle}`}>\r\n                @{props.story.instaHandle}\r\n            </Button>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"story-cover\">\r\n\r\n            <Container className=\"d-flex flex-column align-items-center \">\r\n                <div className=\"cover-photo\" style={{ backgroundImage: `url(\"${getStoryCoverImageURL(props.story)}\")` }}>\r\n                </div>\r\n                <div className=\"story-title-wrapper align-self-center align-items-center\">\r\n                    {titles}\r\n                </div>\r\n                <div className=\"author-details\">\r\n                    <div>\r\n                        <span>By <Link className=\"author-name\" to={'/'}>{props.author.name}</Link></span>\r\n                    </div>\r\n                    <StoryDate date={props.story.date}></StoryDate>\r\n                </div>\r\n            </Container>\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\nimport ExifReader from 'exifreader';\r\nimport \"./PhotoWrapper.css\";\r\n\r\ntype PhotoWrapperProps = {\r\n    imageUrl: string,\r\n    alt: string\r\n}\r\n\r\ntype PhotoWrapperState = {\r\n    imageBlobURL: string | undefined\r\n    focalLength: string | undefined\r\n    aperture: string | undefined\r\n    shutterSpeed: string | undefined\r\n    iso: string | undefined\r\n}\r\n\r\nexport class PhotoWrapperClass extends React.Component<PhotoWrapperProps, PhotoWrapperState> {\r\n\r\n    loadImage() {\r\n        fetch(this.props.imageUrl)\r\n            .then((response) => { return response.arrayBuffer() })\r\n            .then((arrayBuffer) => {\r\n                try {\r\n                    const urlObject = URL.createObjectURL(new Blob([arrayBuffer]));\r\n                    const tags = ExifReader.load(arrayBuffer);\r\n                this.setState({\r\n                    imageBlobURL: urlObject,\r\n                    focalLength: tags[\"FocalLength\"]?.description,\r\n                    aperture: tags[\"ApertureValue\"]?.description,\r\n                    shutterSpeed: tags[\"ShutterSpeedValue\"]?.description,\r\n                    iso: tags[\"ISOSpeedRatings\"]?.description\r\n                });\r\n                } catch (error) {\r\n                    console.error(\"Error parsing \"+ this.props.imageUrl);\r\n                } \r\n            });\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.setState({});\r\n        this.loadImage()\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.imageBlobURL) {\r\n            return <div style={{ width: \"100%\", height: \"500px\", backgroundColor: \"whitesmoke\" }}></div>\r\n        }\r\n\r\n        const focalLength = this.state.focalLength?.replace(/ /g, '') || \"unknown\";\r\n        const aperture = Number.parseFloat(this.state.aperture || \"NaN\");\r\n        \r\n        return <div className=\"photo-wrapper\">\r\n            <img src={this.state.imageBlobURL} alt={this.props.alt}></img>\r\n            <div className='photo-details'>\r\n                <p>{focalLength} f/{aperture} {this.state.shutterSpeed}s ISO{this.state.iso}</p>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from \"react\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\nimport \"./PhotoSet.css\"\r\nimport { getStoryID, Story } from \"../../../model/Story\";\r\nimport {PhotoWrapperClass} from \"./PhotoWrapper\";\r\n\r\ntype PhotoSetProps = {\r\n    story: Story;\r\n}\r\n\r\nexport function PhotoSet(props: PhotoSetProps) {\r\n    const photos = props.story.photos;\r\n    const layout = props.story.layout;\r\n    const rows = [];\r\n\r\n    for (let iL = 0, iP = 0; iL < layout.length; iL++) {\r\n        const amountOfPhotosInRow = layout[iL];\r\n        const columns = [];\r\n        for (let photoInRow = 0; photoInRow < amountOfPhotosInRow; photoInRow++, iP++) {\r\n            columns.push(\r\n                <Col key={iP} md={12 / amountOfPhotosInRow}>\r\n                    <PhotoWrapperClass imageUrl={`./stories/${getStoryID(props.story)}/${photos[iP].fileName}`} alt={photos[iP].fileName}></PhotoWrapperClass>\r\n                </Col>\r\n            );\r\n        }\r\n        const row = <Row>{columns}</Row>;\r\n        rows.push(row);\r\n    }\r\n    return <Container fluid={true} className=\"photoset\">\r\n        {rows}\r\n    </Container>\r\n}","export function getLinkForTag(tag: string): string {\r\n    return `/does/${tag}`;\r\n}","import React from \"react\";\r\nimport { Container, Button } from \"react-bootstrap\";\r\nimport \"./TagSet.css\"\r\nimport { getLinkForTag } from \"../../../util/URLUtils\";\r\n\r\ntype TagSetProps = {\r\n    tags: string[];\r\n}\r\n\r\nexport function TagSet(props: TagSetProps) {\r\n    return <Container fluid={true} className=\"photoset tagset\">\r\n            {props.tags.map((tag) => { return <Tag value={tag}></Tag> })}\r\n    </Container>\r\n}\r\n\r\ntype TagProps = {\r\n    value: string\r\n}\r\n\r\nfunction Tag(props: TagProps) {\r\n    // return <span className=\"tag\">#{props.value}</span>\r\n    return <Button className={\"tag\"} variant=\"secondary\" href={getLinkForTag(props.value)}>#{props.value}</Button>\r\n}","import React from 'react';\r\nimport { Story } from \"../../../model/Story\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\nimport \"./StoryDescription.css\";\r\n\r\nexport type StoryDescriptionProps = {\r\n    story: Story,\r\n}\r\n\r\nexport function StoryDescription(props: StoryDescriptionProps) {\r\n\r\n    if (!props.story.description) {\r\n        return <div></div>;\r\n    }\r\n\r\n    return <Container className=\"story-description\">\r\n        <Row>\r\n            <Col md={12}>\r\n                <p>\r\n                    {props.story.description}\r\n                </p>\r\n            </Col>\r\n        </Row>\r\n    </Container>\r\n}","import React from 'react';\r\nimport { Story } from \"../../model/Story\";\r\nimport { StoryCover } from \"./children/StoryCover\";\r\nimport { Author } from \"../../model/Author\";\r\nimport { PhotoSet } from './children/PhotoSet';\r\nimport { TagSet } from './children/TagSet';\r\nimport { StoryDescription } from './children/StoryDescription';\r\nimport { trackPageView } from '../../util/Utils';\r\n\r\nexport type StoryPageProps = {\r\n  story: Story;\r\n  author: Author;\r\n}\r\n\r\nclass StoryPage extends React.Component<StoryPageProps, {}> {\r\n\r\n  componentDidMount() {\r\n    document.title = `${this.props.story.title} by ${this.props.author.name} - sambenjamin.be`;\r\n    trackPageView(window.location.pathname + window.location.search);\r\n  }\r\n\r\n  render() {\r\n    return <div className='story-page' >\r\n      <StoryCover story={this.props.story} author={this.props.author}></StoryCover>\r\n      <StoryDescription story={this.props.story}></StoryDescription>\r\n      <PhotoSet story={this.props.story}></PhotoSet>\r\n      <TagSet tags={this.props.story.tags || []}></TagSet>\r\n    </div>;\r\n  }\r\n}\r\nexport default StoryPage;","import React from 'react';\r\nimport { Story } from '../../model/Story';\r\nimport { Container } from 'react-bootstrap';\r\nimport { StoryGrid } from '../home/children/StoryGrid';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport { Link } from 'react-router-dom';\r\nimport \"./TagPage.css\";\r\nimport { trackPageView } from '../../util/Utils';\r\n\r\nexport type TagPageProps = {\r\n  tag: string\r\n  stories: Story[]\r\n}\r\n\r\nclass TagPage extends React.Component<TagPageProps, {}> {\r\n\r\n  componentDidMount() {\r\n    document.title = `Stories tagged #${this.props.tag} - sambenjamin.be`;\r\n    trackPageView(window.location.pathname + window.location.search);\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"homepage\">\r\n            <Container style={{ textAlign: \"center\", padding: \"1rem\" }}>\r\n                <h1>#{this.props.tag}</h1>\r\n                <br></br>\r\n                <h4> <Link className=\"go-home\" to=\"/\"><FaArrowLeft /> See more stories</Link></h4>\r\n            </Container>\r\n            <Container fluid={true} style={{ textAlign: \"left\", }}>\r\n            </Container>\r\n\r\n            <StoryGrid stories={this.props.stories}></StoryGrid>\r\n        </div>\r\n  }\r\n}\r\nexport default TagPage;","import \"./Footer.css\"\r\nimport React from 'react';\r\nimport { Author } from './model/Author';\r\nimport { Container } from 'react-bootstrap';\r\n\r\ntype FooterProps = {\r\n    author: Author\r\n}\r\n\r\nexport function Footer(props: FooterProps) {\r\n    return <footer>\r\n        <Container fluid={true}>\r\n            <div className=\"footer-spacer\">\r\n            </div>\r\n            <p>© {new Date().getFullYear()} <a href='/'>{props.author.name}</a>\r\n                <br />\r\n        Leuven, Belgium</p>\r\n        </Container>\r\n    </footer>\r\n}","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport { HomePage } from './components/pages/home/HomePage';\nimport StoryPage from './components/pages/story/StoryPage';\nimport TagPage from './components/pages/tags/TagPage';\nimport './App.css';\nimport { Story, StoryIndex, getStoryID } from './components/model/Story';\nimport { downloadJSON } from \"./components/util/Utils\";\nimport { Author } from './components/model/Author';\nimport { Footer } from './components/Footer';\nimport { getLinkForTag } from './components/util/URLUtils';\n\ntype AppProps = {\n  author: Author;\n}\n\ntype AppState = {\n  hasFullyLoaded: boolean\n  stories: Story[]\n}\n\nclass App extends React.Component<AppProps, AppState> {\n\n  componentWillMount() {\n    this.setState({\n      hasFullyLoaded: false,\n      stories: []\n    });\n  }\n\n  componentDidMount() {\n    downloadJSON(\"/stories/index.json\").then(async (storyIndex: StoryIndex) => {\n      const stories = [];\n      for (let storyID of storyIndex.stories) {\n        const story = await downloadJSON(`/stories/${storyID}/index.json`);\n        stories.push(story);\n      }\n      this.setState({\n        hasFullyLoaded: true,\n        stories: stories\n      })\n    });\n  }\n\n  get storyRoutes() {\n    return this.state.stories.map((story: Story) => {\n      return <Route path={`/${getStoryID(story)}`}>\n        <StoryPage story={story} author={this.props.author}></StoryPage>\n      </Route>\n    });\n  }\n\n  get tagRoutes() {\n    const tags = this.state.stories.map((story: Story) => {\n      return story.tags || [];\n    }).flat();\n\n    return tags.map((tag: string) => {\n      const storiesWithTag = this.state.stories.filter((story: Story) => {\n        return story.tags?.includes(tag);\n      });\n      return <Route path={getLinkForTag(tag)}>\n        <TagPage tag={tag} stories={storiesWithTag}></TagPage>\n      </Route>\n    });\n  }\n\n  render() {\n    if (!this.state.hasFullyLoaded) {\n      return <h1>Getting ready....</h1>;\n    }\n\n    return (<Router>\n      <div id=\"sambenjamin.be\">\n        <Switch>\n          {this.storyRoutes}\n          {this.tagRoutes}\n          <Route path=\"/\">\n            <HomePage stories={this.state.stories} author={this.props.author} />\n          </Route>\n        </Switch>\n        <Footer author={this.props.author}></Footer>\n      </div>\n    </Router>);\n  }\n}\n\nexport default App;","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from './App';\nimport { AUTHOR } from './components/model/Author';\nimport ReactGA from 'react-ga';\n\nReactGA.initialize('UA-161391381-1');\n\nReactDOM.render(\n    <App author={AUTHOR} />,\n    document.getElementById('root') as HTMLElement\n);","export type Author = {\r\n    name: string\r\n    url: string\r\n}\r\n\r\nexport const AUTHOR : Author = {\r\n    name: \"Sam Benjamin\",\r\n    url: \"https://instagram.com/samgielis\"\r\n}"],"sourceRoot":""}